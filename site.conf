# File modificato con qualcosa copiato da quello di MAMP, per provare a risolvere il problema di localhost
# TODO: non era qui il problema, probabilmente si pu√≤ tornare a quello originale

# user                         claudio staff;
# worker_processes             2;

# events {
#     worker_connections       1024;
# }


	server {
		listen               80 default_server;

		root /code;

		error_log  /var/log/nginx/error.log;
        access_log /var/log/nginx/access.log;
    
		location / {
			index            index.html index.php;
		}
	
		
	
		location ~ \.php$ {
            try_files $uri =404;
            fastcgi_split_path_info ^(.+\.php)(/.+)$;
            fastcgi_pass php:9000;
            fastcgi_index index.php;
            include fastcgi_params;
            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
            fastcgi_param PATH_INFO $fastcgi_path_info;
        }

		location ~ /\. {
			deny all;
		}


		location /nginx_status {
			stub_status      on;
			access_log       off;
			allow            127.0.0.1;
			deny			 all;
		}
	}

